# 《深淵守衛：星曜詩篇》(Abyssal Wardens) GDD v0.0.2

---

## 📝 版本變更 (Changes)

### v0.0.2 (2026-02-22)
- **新增：** 英雄技能数量规范化为 3 个（普攻 + 位移技 + 终极技能）
- **新增：** 干员稀有度与独特机制（传奇干员专属词缀、过载变异）
- **新增：** 补充说明「幹員稀有度机制」
- **修正：** 移除干员的主动技能设计

### v0.0.1 (2026-02-22)
- 初始版本

---

**模塊一：遊戲概述與核心迴圈 (Game Overview & Core Loop)**

### 1. 遊戲基本資訊

- 遊戲名稱： 深淵守衛：星曜詩篇 (Abyssal Wardens)
- 遊戲類型： ARPG (動作角色扮演) + TD (塔防) + Loot-based (刷寶)
- 視角與操作： 俯視角 (Isometric 2.5D / 3D)，支援鍵鼠與控制器 (雙搖桿射擊/動作邏輯)。
- 連線模式： 全程連線 (Live-Service)。具備「線上交易 (商會)」與「純單機掉落加成 (SSF守望者)」雙陣營系統。支援單人與雙人合作 (Co-op)。
- 商業模式： 免費遊玩 (F2P)。盈利來源為外觀特效 (MTX)、擴充倉庫頁、外觀通行證。 絕對禁止 Pay-to-Win 與付費抽卡。

---

### 2. 電梯簡報 (Elevator Pitch)

這是一款將《暗黑破壞神》的狂熱刷寶與《流亡黯道》的無限流派構築，無縫融入《明日方舟》與《王國守衛戰》塔防大局觀的創新之作。玩家將操控一名英雄本體，穿梭於戰場中親自斬殺怪物；同時利用裝備上的「技能寶石連線」，將強大的防禦塔（幹員）實時部署於地圖各處。你的裝備決定了塔的火力，你的走位決定了防線的存亡。

---

### 3. 核心設計支柱 (Design Pillars)

| 核心支柱 | 開發實踐目標 |
|---|---|
| 動態防禦 (Dynamic TD) | 拋棄純粹的掛機看戲。加入英雄走位、技能反哺、戰術子彈時間 (10% 緩速部署)，以及會破壞地形的 Boss，強制玩家實時微操。 |
| 萬物皆可刷 (Loot is King) | 裝備、技能寶石、防禦塔(幹員)、洗圖通貨，全數由打怪掉落。極品幹員以「金色光柱」的傳奇掉落形式呈現。 |
| 共鳴構築 (Resonance Build) | 英雄不穿拔不下來的專屬裝備，防禦塔沒有獨立背包。一切圍繞「英雄裝備上的寶石插槽連線」，創造英雄與塔共用技能的化學反應。 |
| 可控的護肝打造 (Deterministic Craft) | 採用《最後紀元》的「碎片與張力」系統結合基地派駐。裝備打造結果可視化，消除隨機爆裝的挫敗感。 |

---

### 4. 美術與音效定調 (Art & Audio Direction)

- 視覺風格： 黑暗奇幻交織科幻元素 (Dark Sci-Fantasy)。場景帶有深淵腐化的破敗感，而玩家的技能與幹員呈現高科技或高階魔法的俐落光影 (對比度高，確保戰場辨識度)。
- UI 介面： 極簡主義。局內隱藏繁瑣數據，凸顯血條、部署點數與 Boss 狀態；局外背包與星盤要求網格對齊、圖標清晰，支援一鍵整理。
- 音效回饋： ARPG 級別的打擊感。物品掉落需有極具辨識度的音效 (如 PoE 的 Exalted Orb 音效)；幹員部署時需有重金屬砸地的沉重感。

---

### 5. 核心遊戲迴圈 (Core Game Loop)

遊戲的成癮性建立在兩個緊密咬合的迴圈上：**局內戰鬥 (Micro Loop)** 與 **局外養成 (Macro Loop)**。

#### 5.1 局內戰鬥迴圈 (Match / Micro Loop)

單局遊戲時間設計為 **5~10 分鐘**，確保節奏緊湊。

1. 進場與索敵： 讀取地圖詞綴，英雄入境，怪物開始按波次/路線湧出。
2. 斬殺與造血： 英雄親自介入戰鬥，使用自帶技能與未綁定塔的寶石技能擊殺怪物，獲取「部署點數 (Cost)」與「統帥值 (大招能量)」。
3. 實時建軍： 消耗點數，開啟「戰術子彈時間」，將裝備上連線好的精英幹員部署至高台或平地，建立防線。
4. 動態調度： 應對突發狀況 (如精英怪繞背、Boss 摧毀高台)，英雄進行走位補位，或撤退並重新部署幹員。
5. 高潮與結算： 擊殺最終 Boss，觸發全螢幕 Loot (戰利品噴發)，結算經驗值，開啟傳送門回城。

#### 5.2 局外養成迴圈 (Hub / Macro Loop)

在「星曜母艦 (Hub)」中進行，是消耗玩家大量時間的心流體驗區。

1. 鑑定與替換： 檢視戰利品，替換更強的裝備或寶石，將新掉落的幹員加入構築陣容。
2. 加工與消耗： 進入兵工廠，派駐閒置幹員，消耗掉落的「詞綴碎片」強化裝備，消耗裝備的「結構張力」。
3. 星盤成長： 分配升級獲得的天賦點數，點出改變底層規則的「核心星骸 (Keystone)」。
4. 星圖佈局： 將打到的「戰區卷軸」放入製圖儀器，消耗洗圖通貨改變地圖詞綴 (增加風險與掉落率)，隨後開啟傳送門進入下一局。

---

# 模塊二：靈樞共鳴系統 (The Resonance System)

### 1. 系統概述 (System Overview)

本系統旨在解決「多重單位微操地獄」的痛點。遊戲中所有的主動技能、輔助效果與防禦塔實體，皆以「寶石」形式存在，並統一鑲嵌於「英雄本體」的裝備插槽中。透過寶石間的連線 (Links) 與戰場上的部署狀態 (Deployment State)，動態決定技能的歸屬權與數值加成。

---

### 2. 裝備與插槽規範 (Equipment & Sockets)

英雄擁有 8 個裝備欄位，不同欄位擁有不同的最大插槽數與連線上限：

- 雙手武器 (Two-Handed) / 胸甲 (Chest)： 最多 6 洞 6 連 (核心決戰兵器/主塔)。
- 頭盔 (Helm) / 手套 (Gloves) / 鞋子 (Boots)： 最多 4 洞 4 連 (常規精英幹員/輔助技能)。
- 主手武器 (Main-Hand) / 副手盾牌 (Off-Hand)： 最多 3 洞 3 連。
- 項鍊 (Amulet) / 戒指 (Ring) x2： 無插槽，純提供強大基礎屬性與特殊詞綴。

---

### 3. 寶石類型與連線邏輯 (Gem Types & Link Logic)

插槽不限制顏色，但寶石分為三大類。連線群組內必須包含至少一顏🔴或🟡才能產生主動效果。

- 🟡 陣地石 (Operator Gem)： 決定防禦塔基座 (例：[重裝衛士]、[高台狙擊手])。自帶基礎血量、阻擋數、攻擊距離與基礎部署費用 (Cost)。
- 🔴 技能石 (Skill Gem)： 決定攻擊/施法動作 (例：[旋風斬]、[冰霜新星]、[多重射擊])。
- 🔵 輔助石 (Support Gem)： 改變技能形態或提供數值倍率 (例：[範圍擴大]、[高階多重投射]、[受擊時施放])。

**【連線優先級規則】**

1. 若連線中 沒有 🟡陣地石，則🔴技能石的效果 永久綁定於英雄本體 。
2. 若連線中 有 🟡陣地石與🔴技能石，則觸發「量子部署狀態」切換。

---

### 4. 量子部署狀態切換 (Quantum Deployment State)

這是程式邏輯的判定核心。以 `[🟡高台狙擊手] - [🔴爆裂箭矢] - [🔵多重投射]` 連線為例：

**狀態 A：未部署 (Undeployed / Hero Stance)**

- 觸發條件：玩家未消耗 Cost 部署該幹員。
- 執行邏輯：英雄的快捷鍵上出現 [爆裂箭矢] 技能，且自帶多重投射效果。英雄親自施放。

**狀態 B：已部署 (Deployed / Operator Stance)**

- 觸發條件：玩家消耗 Cost，將該幹員放置於合法地形 (高台/平地)。
- 執行邏輯： 英雄快捷鍵上的 [爆裂箭矢] 立即被鎖定/移除 。
- 場上的【高台狙擊手】開始自動施放帶有多重投射的 [爆裂箭矢]。
- 觸發**「靈樞反哺 (Resonance Backfeed)」**：英雄獲得該裝備部位預設的被動增益 (例：移動速度 +10% 或 普攻附帶火焰傷害)，直到該幹員被撤退或陣亡。

---

### 5. 數值繼承與轉換公式 (Stat Inheritance & Conversion)

當幹員被部署到場上時，其最終作戰數值並非僅靠寶石等級決定，而是會繼承英雄的裝備面板。為了確保數值膨脹在可控範圍內，系統採用嚴格的轉換公式。

以計算防禦塔的**最終攻擊力 (Final ATK)** 為例，運算邏輯如下：

$$ATK_{final} = \left( Base_{op} + \sum_{i=1}^{n} Flat_{item\_i} \right) \times \left( 1 + \sum Modifiers_{gem} \right) \times \mu_{resonance}$$

*公式參數說明：*

- $Base_{op}$：陣地石 (幹員) 本身的基礎攻擊力。
- $\sum_{i=1}^{n} Flat_{item\_i}$：該陣地石所鑲嵌的「該件裝備」(Item) 上提供的附加點傷總和 (例如武器上的「+50 物理傷害」)。 注意：只吃鑲嵌部位的裝備，不吃全身。
- $\sum Modifiers_{gem}$：連線中所有 🔵 輔助石提供的傷害倍率總和 (例如「增加 40% 傷害」)。
- $\mu_{resonance}$： 靈樞共鳴係數 (Resonance Multiplier) 。這是英雄天賦盤與全局詞綴提供的轉換率 (預設為 1.0，若點出特殊天賦如「統帥威儀」，此係數可大幅提升)。

**【防禦與血量繼承】**
幹員的生命值與護甲，預設繼承英雄全身總面板的 **30%**。這確保了「英雄越硬，防禦塔越難被 Boss 拆掉」的 ARPG 刷裝正向回饋。

---

# 模塊三：戰鬥與關卡機制 (Combat & Level Design)

### 1. 關卡尋路與防線構建 (Pathing & Defense Construction)

為了兼顧 ARPG 的動作流暢度與 TD 的策略性，本遊戲**不採用**「全開放空地造迷宮」的機制，而是採用「固定路徑 + 戰術部署位」的混合設計。

- 尋路邏輯 (NavMesh & Pathing)： 怪物生成點 (Spawn Points) 與防禦終點 (Base/Core) 之間存在預設的最短路徑。
- 怪物只會在路徑上移動，並根據自身的 AI 設定（如：刺客怪會優先閃避陷阱、重甲怪走直線）進行微調。

**部署位限制 (Deployment Tiles)：**

- 平地/近戰位 (Ground Tiles)： 位於怪物路徑上。只能部署帶有「阻擋數 (Block Count)」的近戰幹員（如重裝、近衛）。他們會物理性卡住怪物的推進。
- 高台/遠程位 (Highground Tiles)： 位於路徑兩側的制高點。只能部署遠程幹員（如狙擊、術士、輔助）。高台幹員免疫一般近戰怪物的攻擊，但會成為敵方遠程單位的目標。
- 例外（英雄特權）： 【機甲軍工師】等特定英雄技能，可於平地強制生成「臨時高台」，改變局部地形限制。

---

### 2. 戰術子彈時間 (Tactical Bullet-Time)

ARPG 節奏極快，而 TD 需要精準點擊。為了不讓玩家因為手忙腳亂而摔搖桿，引入全局時間控制機制。

- 觸發條件： 當玩家按下「部署快捷鍵（選擇幹員）」或「統帥大招鍵」並按住不放時，立即觸發。
- 時間流逝率 (Time Scale)： 遊戲整體時間流逝速度降至 10% (Time.timeScale = 0.1f) 。
- 視覺與音效表現： 畫面邊緣出現暗色暈影 (Vignette)，背景音樂頻率降低，並加入心跳聲的音效回饋。
- 操作邏輯： 在此狀態下，玩家可以使用右搖桿（或滑鼠）從容地選取部署位置，並調整幹員的**「攻擊朝向」**（決定扇形攻擊範圍的覆蓋面）。
- 鬆開按鍵即完成部署，時間瞬間恢復正常 (100%)。若取消部署，則不扣除 Cost 並恢復時間。

---

### 3. 仇恨值與敵方 AI 邏輯 (Aggro & Enemy AI)

由於戰場上同時存在「防禦終點」、「英雄本體」與「各種幹員」，敵方的索敵邏輯必須清晰可控，讓玩家能透過走位來「拉仇恨」。

**【基礎仇恨優先順序 (由高到低)】**

1. 嘲諷狀態 (Taunt)： 具備嘲諷技能的幹員或英雄。
2. 阻擋者 (Blocker)： 正在物理阻擋該怪物的近戰幹員。
3. 英雄本體 (Hero)： 若英雄進入怪物的警戒半徑內，大部分怪物會放棄前進，優先攻擊英雄。 (玩家微操的核心：用肉身引開高威脅怪)
4. 最後部署的幹員 (Last Deployed)： 相同條件下，敵方遠程單位會優先攻擊玩家「最後放下去」的幹員（致敬 AK 經典避雷針戰術）。
5. 防禦終點 (Base)： 若無干擾，怪物直奔終點。

**【Boss 專屬 AI (以「滅星巨獸」莫拉斯為例)】**

- Boss 具備「無視阻擋 (Unblockable)」特性，一般的重裝幹員無法攔住他。
- 具備「地形破壞」技能，會強制鎖定輸出最高的高台幹員，並摧毀該高台（將幹員強制退場並進入長冷卻）。
- 決鬥階段： 當 Boss 血量降至特定閥值，會強制釋放「領域展開」，此時 Boss 的仇恨 100% 鎖定英雄本體 ，防禦塔無法干預，轉為純粹的 ARPG 動作閃避與輸出檢定。

---

### 4. 勝負判定與死亡懲罰 (Win/Loss & Death Penalty)

結合了兩種遊戲類型的失敗條件，創造出極具壓迫感的容錯機制。

- 防禦終點生命值 (Base HP)： 每局關卡基地預設擁有 10~20 點生命值 。
- 漏過一隻普通小怪扣除 1 點；漏過精英怪扣除 3 點；Boss 漏網直接扣除 20 點 (即死)。
- 基地血量歸零 ＝ 任務失敗 (Game Over) ，結算極少量經驗值，無裝備掉落。

**英雄死亡懲罰 (Hero Death / Respawn)：**

- 英雄本體血量歸零時， 不會立刻 Game Over 。
- 英雄化為靈魂狀態，進入 「復活倒數 (Respawn Timer)」 （預設 15 秒，隨難度增加）。
- 致命連鎖效應： 英雄死亡期間，場上所有部署的幹員將失去「裝備屬性繼承」與「靈樞反哺 Buff」。防禦塔的攻擊力與防禦力會瞬間暴跌約 40%。
- 戰術結果： 英雄一旦倒下，原本穩固的防線極有可能在這 15 秒內崩盤導致漏怪，進而扣除基地血量導致失敗。這逼迫玩家必須保命，不能無腦送死。

---

# 模塊四：經濟與成長系統 (Economy & Progression)

### 1. 雙軌陣營與交易系統 (Dual-Faction Economy)

為徹底解決「工作室打金破壞經濟」與「單機玩家毫無體驗」的 ARPG 千古難題，遊戲採用強制性的雙軌陣營選擇（通關主線後解鎖，切換需付出聲望代價）。

**陣營 A：星際商會 (The Merchant Guild) - 【Trade 模式】**

- 核心功能： 解鎖全球拍賣行 (Auction House)。玩家可使用通用通貨「星幣」自由買賣非綁定的裝備、寶石與幹員靈魂石。
- 限制平衡： 基礎掉落率維持標準值 (100%)。透過拍賣行交易的裝備，其「結構張力 (鍛造潛能)」會永久扣除一定比例，防止裝備無限轉手。

**陣營 B：獨行守望者 (The Lone Wardens) - 【SSF 單機模式】**

- 核心功能： 完全關閉交易與組隊功能。 玩家的所有掉落物皆為帳號綁定。
- 專屬增益： 獲得「預言觀星台」功能。玩家可消耗聲望精準設定掉落目標。基礎掉落數量與稀有度獲得巨幅提升（如：傳奇掉落率 +150%）。確保純單機玩家也能靠自己打造出畢業神裝。

---

### 2. 可控鍛造與基建聯動 (Deterministic Crafting & Base Management)

摒棄全隨機的破壞性打造，結合《最後紀元》的可視化鍛造與《明日方舟》的基建派駐。

- 核心資源：
  - **詞綴碎片 (Affix Shards)**： 打怪掉落，100% 機率將特定屬性附加至裝備上（例如：附加 [高台攻擊力 +15] 碎片）。
  - **結構張力 (Structural Tension)**： 每件裝備掉落時自帶的隱藏數值。每次鍛造必定向下扣除張力，張力歸零則裝備「定型」，無法再加工， 但絕不會碎裂消失 。

**兵工廠派駐邏輯 (Armory Stationing)：**
玩家在局外可將閒置的「幹員」派駐於兵工廠。不同職業的幹員提供不同的鍛造增益。

**張力消耗公式 (Tension Cost Formula)：**
工程師實作時，每次敲打碎片的張力消耗 $T_{cost}$ 需依循以下公式計算：

$$T_{cost} = \max\left(0, \lfloor B_{cost} \times (1 - Buff_{op}) \times RNG_{factor} \rfloor\right)$$

*(註：$B_{cost}$ 為該詞綴的基礎消耗值；$Buff_{op}$ 為派駐幹員提供的減免百分比；$RNG_{factor}$ 為 0.8 至 1.2 的隨機浮動值。若觸發幹員的極限暴擊，$T_{cost}$ 可降為 0。)*

---

### 3. 終局玩法與無限挑戰 (Endgame: The Abyssal Atlas)

滿級後的遊戲重心，融合了地圖構建與動態難度選擇。

- 深淵星圖 (The Atlas Rifts)： 實體掉落的「戰區卷軸 (Maps)」可使用通貨洗詞綴。地圖詞綴不僅改變怪物強度（如：怪物自帶物理護盾），更會 直接改變塔防地形 （如：本地圖高台數量減少 50%）。

**危機合約 (Contingency Protocols)：**

- 取代傳統無限堆疊怪物血量的排行榜。玩家在進入頂級大秘境前，需手動勾選「負面協議」（例：禁止部署重裝幹員、英雄無法使用位移技能）。
- 勾選的協議難度越高（合約等級越高），結算時掉落頂級「星辰暗金」裝備的機率呈指數型成長。

---

### 4. 商業模式與賽季輪替 (Monetization & Seasons)

維持 Live-Service 營運的健康血液，堅持 Pay-to-Cool。

**付費點 (Microtransactions)：**

- 便利性：額外的倉庫頁 (Stash Tabs)、專屬碎片整理箱。
- 外觀：英雄時裝、幹員部署時的特效外觀、自定義城鎮傳送門、技能特效替換（例：將冰霜新星換成暗影爆破視覺）。

**賽季機制 (3-Month Leagues)：**

- 每 3 個月開啟新賽季。賽季角色從零開始（賽季結束後併入永久服）。
- 每個新賽季引入一個「破壞現有規則」的賽季專屬機制（例：「血月賽季」中，怪物被擊殺後會變成友方骷髏兵替你阻擋敵人），並推出 1~2 名全新英雄職業與若干新幹員寶石。

---

# 附錄：CBT 封測內容體量清單 (Scope Definition)

封測預計提供玩家 **約 10~15 小時** 的流暢遊玩體驗（包含打通基礎主線與體驗初階 Endgame）。

| 項目 | 數量 | 目的 |
|---|---|---|
| **英雄職業** | 2 名 | 測試近戰/遠程系統差異 |
| **幹員 (塔)** | 12 種 | 2~3 種流派組合 |
| **技能/輔助寶石** | 25 顆 | 驗證連線系統與化學反應 |
| **傳奇裝備** | 20 件 | 測試極端 BD 與數值平衡 |
| **地貌環境** | 3 種 | 測試不同地形部署策略 |
| **敵方單位** | 12 種 | 涵蓋物抗、法抗、隱形等經典配置 |
| **首領戰** | 2 隻 | 中型守門 + 1 隻完整階段 Uber Boss |
| **Endgame** | 5 張地圖 + 10 種詞綴 | 體驗洗圖與刷寶基礎迴圈 |

---

## 📦 補充說明：幹員稀有度與獨特機制

### 1. 稀有度與掉落

| 稀有度 | 顏色 | 獲取方式 | 特性 |
|--------|------|----------|------|
| 普通 (N) | 白色 | 普通怪物掉落 | 純基座，攻擊方式由裝備寶石決定 |
| 精良 (R) | 藍色 | 精英怪物掉落 | 略強的基礎屬性 |
| 傳奇 (L) | 金色 | Boss/寶箱產出 | 擁有「破壞規則」的獨特詞綴 |

### 2. 傳奇幹員專屬機制

傳奇幹員（金色掉落）不僅是數值更強，更重要的是**機制上的質變**：

#### 2.1 內建輔助連線 (Innate Support Links)
傳奇幹員自帶隱藏輔助效果，突破裝備洞數極限。

> **範例：** 傳奇法師【星隕法師】
> - 自帶詞綴：「此幹員施放的所有投射物技能，強制附加『連鎖 3 次』與『投射物數量 +2』效果。」

#### 2.2 獨特索敵與範圍質變 (Targeting Mutation)
傳奇幹員的攻擊邏輯與普通幹員完全不同。

> **範例：** 傳奇狙擊手【死神之眼】
> - 全圖攻擊範圍，但永遠只瞄準「當前血量最高」的敵人

#### 2.3 專屬過載大招 (Overload Mutation)
傳奇幹員的過載狀態是機制突變，而非單純數值提升。

> **範例：** 傳奇重裝【虛空屏障】
> - 過載時阻擋數變成無限，並將周圍敵人強制牽引到身邊

#### 2.4 極端共鳴 (Extreme Resonance)
傳奇幹員會深刻改變英雄的戰鬥方式。

> **範例：** 傳奇特種【血契刺客】
> - 「當此幹員在場上時，英雄本體造成的所有傷害轉化為真實傷害」

### 3. 設計原則

- **普通/精良幹員** = 純基座（由寶石決定攻擊方式）
- **傳奇幹員** = 帶有独特机制的核心掉落物
- 傳奇幹員的價值在於「創造新流派」，而非純數值碾壓

---

# 附錄：CBT 封測內容體量清單 (Scope Definition)
